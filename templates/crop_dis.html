{% extends 'base.html' %}
{% block title %}Fertilizer Recommendation{% endblock title %}
{% block body %}
<style>
    /* Hide the original file input */
    .input-wrapper input[type="file"] {
        display: none;
    }

    /* Style the custom file upload button */
    .custom-file-upload {
        display: inline-block;
        padding: 10px 15px;
        cursor: pointer;
        border: 1px solid #ccc;
        border-radius: 5px;
        background-color: #f0f0f0;
        color: #333;
        font-size: 16px;
    }

    /* On hover style */
    .custom-file-upload:hover {
        background-color: #e0e0e0;
    }

    .card {
        max-width: 600px;
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        padding: 30px;
        text-align: center;
    }

    .card h1 {
        color: #27ae60;
        margin-bottom: 20px;
    }

    #selected-image-container {
        margin-top: 20px;
        text-align: center;
    }

    #selected-image {
        max-width: 70%;
        border-radius: 5px;
        display: none;
    }

    .button-container {
        margin-top: 20px;
        text-align: center;
    }

    button {
        background-color: #27ae60;
        color: #fff;
        padding: 10px 20px;
        border: none;
        cursor: pointer;
        font-size: 16px;
        border-radius: 5px;
        transition: background-color 0.3s ease;
    }

    button:hover {
        background-color: #218c53;
    }
</style>

<div class="row col-lg-12">
    <div class="col-lg-3 bg-light d-none d-md-block sidebar">
        <div class="mb-1" style="background-color: rgb(245,222,179); height:610px;">
            <div class="text-center">
                <img src="/static/images/farmer_icon.png" alt="avatar" class="rounded-circle img-fluid" style="width: 100px; margin-top: 30px;">
                <h1 class="mt-0 mb-3" style="color:rgb(0, 0, 0);"> {{first_name}} {{last_name}} </h1>
                <hr color="black">
                <li><h3><i class="basicinfo"></i><a href="dashboard" style="color: rgb(0, 0, 0);">Home</a></h3></li>
                <hr color="black">
                <li><h3><i class="Crop_Pre"></i><a href="crop_prediction" style="color:rgb(6, 2, 2);">Crop Prediction</a></h3></li>
                <hr color="black">
                <li><h3><i class="Crop_Dis"></i><a href="fert_rec" style="color:rgb(5, 1, 1);">Fertilizer Recommendation</a></h3></li>
                <hr color="black">
                <li><h3><i class="Crop_Dis"></i><a href="crop_dis" style="color:rgb(5, 1, 1);">Crop Disease</a></h3></li>
                <hr color="black">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" style="background-color: hsl(182, 48%, 28%)"
                        type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false">
                        Basic Information
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item"
                            href="https://krishi.maharashtra.gov.in/Site/Information/DisplayGuideLines.aspx?MenuID=1143">Government
                            Yojna</a>
                        <a class="dropdown-item" href="loan1">Loans</a>
                        <a class="dropdown-item" href="insurance">Insurance</a>
                    </div>
                </div>
                <hr color="black">
                <li><h3><i class="Crop_Pre"></i><a href="news" style="color:rgb(6, 2, 2);">News</a></h3></li>
                <hr color="black">
                <li><h3><i class="Crop_Pre"></i><a href="https://agmarknet.gov.in/" style="color:rgb(6, 2, 2);">E-Commerce</a></h3></li>
                <hr color="black">
                <li><h3><i class="Crop_Pre"></i><a href="e_market" style="color:rgb(6, 2, 2);">E-Market</a></h3></li>
                <hr color="black">
                <h3><a href="log_out" style="color:rgb(16, 4, 4);"> Log Out </a></h3>
                <hr color="black">
            </div>
        </div>
    </div>

    <div class="col-lg-8">
        <div class="card">
            <h1>Leaf Disease Detection</h1>
            <form action="upload" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <label for="file" class="label-container custom-file-upload">
                    Choose a File
                    <input type="file" name="Images" id="file" accept=".png, .jpg, .jpeg" onchange="previewImage()">
                </label>
                <div id="selected-image-container">
                    <img id="selected-image" alt="Selected Image">
                </div>
                <div class="button-container">
                    <button type="submit">Upload and Predict</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    function previewImage() {
        var fileInput = document.getElementById('file');
        var selectedImage = document.getElementById('selected-image');

        if (fileInput.files && fileInput.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                selectedImage.src = e.target.result;
                selectedImage.style.display = 'block';
            };
            reader.readAsDataURL(fileInput.files[0]);
        }
    }
</script>
{% endblock body %}
